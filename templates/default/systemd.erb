[Unit]
Description=Caddy webserver
Documentation=https://caddyserver.com/
After=network.target

[Service]
<%= @user ? "User=#{@user}" : '#User=some_user' %>
<%= @group ? "Group=#{@group}" : '#Group=some_group' %>
WorkingDirectory=<%= @workdir %>
LimitNOFILE=<%= @ulimit %>
ExecStartPre=/sbin/setcap 'cap_net_bind_service=+ep' /usr/local/caddy-1/caddy
ExecStart=<%= @command %> <%= @options %>
Restart=on-failure
StartLimitInterval=600

[Install]
WantedBy=multi-user.target
